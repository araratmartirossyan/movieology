(this.webpackJsonpmovieology=this.webpackJsonpmovieology||[]).push([[0],{167:function(e,t,a){e.exports=a(276)},270:function(e,t,a){},271:function(e,t,a){},273:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){"use strict";a.r(t);a(168),a(194),a(196),a(197),a(199),a(200),a(201),a(202),a(203),a(204),a(205),a(206),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235),a(236);var n=a(0),r=a.n(n),c=a(29),s=a.n(c),o=a(25),l=a.n(o),i=a(9),m=a.n(i),u=a(36),v=a(30),p=a(34),d=a(35),f=a(95),E=a.n(f),b={movies:"https://api.themoviedb.org",api:"https://movie.incodewetrust.dev",omdb:"https://www.omdbapi.com"},h=function(e,t,a){var n,r,c,s,o=arguments;return m.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=o.length>3&&void 0!==o[3]?o[3]:{},l.prev=1,r="omdb"===a?"".concat(t,"&apikey=").concat("f5f111a3"):t,l.next=5,m.a.awrap(E()({url:"".concat(b[a],"/").concat(r),method:e,data:n}));case 5:return c=l.sent,s=c.data,l.abrupt("return",s);case 10:return l.prev=10,l.t0=l.catch(1),l.abrupt("return",l.t0);case 13:case"end":return l.stop()}}),null,null,[[1,10]])},w=function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,[{key:"fetchMovies",value:function(){var e;return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.awrap(h("get","movies","api",{}));case 3:return e=t.sent,t.abrupt("return",e);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),null,null,[[0,7]])}}]),e}(),g=function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,[{key:"fetchPosts",value:function(){var e;return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.awrap(h("get","posts","api"));case 3:return e=t.sent,t.abrupt("return",e);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),null,null,[[0,7]])}}]),e}(),N=a(101),x=a(278);l.a.subscribe((function(){}));var y=function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,[{key:"getUserFromVk",value:function(){var e,t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(e=localStorage.getItem("user"))){n.next=4;break}return n.abrupt("return",JSON.parse(e));case 4:return n.next=6,m.a.awrap(l.a.sendPromise("VKWebAppGetUserInfo"));case 6:return t=n.sent,localStorage.setItem("user",JSON.stringify(t)),n.next=10,m.a.awrap(h("post","profiles","api",Object(N.a)({},Object(x.a)(["photo_max_orig","first_name","last_name"],t),{userId:t.id})));case 10:return a=n.sent,n.abrupt("return",a);case 14:throw n.prev=14,n.t0=n.catch(0),n.t0;case 17:case"end":return n.stop()}}),null,null,[[0,14]])}}]),e}(),k=function(){var e,t,a,n,r,c;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=new w,t=new g,a=new y,s.next=5,m.a.awrap(e.fetchMovies());case 5:return n=s.sent,s.next=8,m.a.awrap(t.fetchPosts());case 8:return r=s.sent,s.next=11,m.a.awrap(a.getUserFromVk());case 11:return c=s.sent,s.abrupt("return",{movies:n,user:c,posts:r});case 13:case"end":return s.stop()}}))},O=a(96),j=a.n(O),S=(a(270),function(e){var t=e.onFindMovie,a=e.moving,c=Object(n.useState)({processing:!1}),s=Object(u.a)(c,2),o=s[0],l=s[1];return r.a.createElement("div",{className:"movie-block"},r.a.createElement("div",{className:"movie-button"},r.a.createElement("button",{className:j()({button:!0,processing:o.processing,"element-move-top":a}),onClick:function(){l({processing:!0}),t()}},r.a.createElement("span",null,"\u0427\u0442\u043e \u0433\u043b\u044f\u043d\u0443\u0442\u044c?"),r.a.createElement("svg",{viewBox:"0 0 15 13"},r.a.createElement("polyline",{points:"2 6.5 6 10.5 13 2.5"})))))}),_=(a(271),function(e){var t=e.onFindMovie,a=e.movie;return r.a.createElement("div",{className:"welcome_panel"},r.a.createElement(S,{onFindMovie:t,movie:a}))}),M=a(97),I=a.n(M),P=a(98),F=a.n(P),V=a(99),B=a.n(V),J=a(100),A=a.n(J),C=(a(273),function(e){var t=e.movie,a=t.Title,n=t.Poster,c=t.Plot,s=t.Actors,o=t.Rated,l=t.Runtime,i=t.Genre,m=t.imdbRating,u=e.goBack;return r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"cellphone-container"},r.a.createElement("div",{className:"movie"},r.a.createElement("div",{className:"movie-img",style:{backgroundImage:"url(".concat(n,")"),backgroundSize:"cover"}}),r.a.createElement("div",{className:"text-movie-cont"},r.a.createElement("div",{className:"mr-grid"},r.a.createElement("div",{className:"col1"},r.a.createElement("h2",{className:"title"},a),r.a.createElement("ul",{className:"movie-gen"},r.a.createElement("li",null,o," /"),r.a.createElement("li",null,l," /"),r.a.createElement("li",null,i)))),r.a.createElement("div",{className:"mr-grid summary-row"},r.a.createElement("div",{className:"col2"},r.a.createElement("h3",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:")),r.a.createElement("div",{className:"col2"},r.a.createElement("div",{className:"movie-likes"},r.a.createElement(A.a,{width:20,height:20}),r.a.createElement("span",null,m)))),r.a.createElement("div",{className:"mr-grid"},r.a.createElement("div",{className:"col1"},r.a.createElement("p",{className:"movie-description"},c))),r.a.createElement("div",{className:"mr-grid actors-row"},r.a.createElement("div",{className:"col1"},r.a.createElement("p",{className:"movie-actors"},s.split("...")[0]))),r.a.createElement("div",{className:"mr-grid action-row"},r.a.createElement("div",{className:"col6 action-btn"},r.a.createElement(B.a,{width:30,height:30,style:{color:"#fe4141"}})),r.a.createElement("div",{className:"col6 action-btn"},r.a.createElement(F.a,{width:30,height:30,style:{color:"#fe4141"}})),r.a.createElement("div",{className:"col6 action-btn"},r.a.createElement(I.a,{width:30,height:30,style:{color:"#fe4141"}}))),r.a.createElement("div",{className:"back-btn"},r.a.createElement(v.a,{size:"xl",level:"outline",onClick:u},"\u041d\u0430\u0437\u0430\u0434"))))))}),R=(a(274),a(275),function(){var e=Object(n.useState)("welcome"),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),o=Object(u.a)(s,2),l=(o[0],o[1]),i=Object(n.useState)(null),p=Object(u.a)(i,2),d=p[0],f=p[1];Object(n.useEffect)((function(){!function(){var e,t;m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(k());case 2:e=a.sent,t=e.user,console.log(t),l(t);case 6:case"end":return a.stop()}}))}()}),[]);return r.a.createElement(v.c,{activeView:a},r.a.createElement(v.d,{header:!1,activePanel:"welcome_panel",id:"welcome"},r.a.createElement(v.b,{id:"welcome_panel"},r.a.createElement(_,{onFindMovie:function(){var e,t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(k());case 2:e=n.sent,t=e.movies,a=Math.floor(Math.random()*t.length),f(t[a]),setTimeout((function(){c("movie")}),3e3);case 7:case"end":return n.stop()}}))}}))),r.a.createElement(v.d,{header:!1,activePanel:"movie_panel",id:"movie"},r.a.createElement(v.b,{id:"movie_panel",style:{backgroundColor:"#1e1b26"}},d&&r.a.createElement(C,{movie:d,goBack:function(){return c("welcome")}}))))});l.a.send("VKWebAppInit",{}),s.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.7edb6824.chunk.js.map